!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){"use strict";function a(a){return a.replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(a,b,c){return"~~"===b?"<del>"+c+"</del>":"<b>"+c+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(a,b,c,d,e){return b+"<i>"+d+"</i>"+e})}function b(a){return a.replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(a,b,c,e,f,g){var h=g?' title="'+g+'"':"";return b?'<img src="'+d.href(f)+'" alt="'+c+'"'+h+"/>":(e&&(h+=' target="_blank"'),'<a href="'+d.href(f)+'"'+h+">"+c+"</a>")})}function c(c){return b(a(c))}var d=function(a){return a.replace(/.+(?:\n.+)*/g,function(a){for(var b,d=[],e=c(a).split("\n"),f=0,g=e.length;g>f;++f){var h=e[f],i=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(h);if(i)d.push(b=[i[2],"h",i[1].length]);else{var j=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(h);if(j)d.push(b=[j[3],j[2]?"ol":"ul",j[1].length]);else{var k=/^\s{0,3}([-])(\s*\1){2,}\s*$/.exec(h);k?d.push(b=["","hr"]):b&&"hr"!==b[1]&&"h"!==b[1]?b[0]+="\n"+h:d.push(b=[h,"p",""])}}}for(var l="",m=[],f=0,g=d.length;g>f;++f){var b=d[f],n=b[0],o=b[1];if("ul"===o||"ol"===o)!m.length||b[2]>m[0][1]?(m.unshift([o,b[2]]),l+="<"+m[0][0]+"><li>"+n):m.length>1&&b[2]<=m[1][1]?(l+="</li></"+m.shift()[0]+">",--f):l+="</li><li>"+n;else{for(;m.length;)l+="</li></"+m.shift()[0]+">";l+="hr"===o?"<hr/>":"<"+o+b[2]+">"+n+"</"+o+b[2]+">"}}for(;m.length;)l+="</li></"+m.shift()[0]+">";return l})};return d.href=function(a){return a},d});