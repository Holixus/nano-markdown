!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){"use strict";function a(a){return a.replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(a,b,c){return"~~"===b?"<del>"+c+"</del>":"<b>"+c+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(a,b,c,d,e){return b+"<i>"+d+"</i>"+e})}function b(a){return a.replace(/!?\[([^\]<>]+)\]\(([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(a,b,c,e){var f="";return e&&(f+=' title="'+e+'"'),"!"===a.charAt(0)?'<img src="'+d.href(c)+'" alt="'+b+'"'+f+"/>":("+"===c.charAt(0)&&(f+=' target="_blank"',c=c.substr(1)),'<a href="'+d.href(c)+'"'+f+">"+b+"</a>")})}function c(c){return b(a(c))}var d=function(a){return a.replace(/.+(?:\n.+)*/g,function(a){for(var b,d=[],e=c(a).split("\n"),f=0,g=e.length;g>f;++f){var h=e[f],i=/^\s*(\#{1,6})(.+)$/.exec(h);if(i)d.push(b=[i[2],"h",i[1].length]);else{var j=/^(\s*)(?:(\*|\-)|\d(\.|\))) (.+)$/.exec(h);if(j){var k=j[2]?"ul":"ol",l=j[1].length;d.push(b=[j[4],k,l])}else{var m=/^(?:([\*\-_] ?)+)\1\1$/.exec(h);m?d.push(b=["","hr"]):b&&"hr"!==b[1]?b[0]+="\n"+h:d.push(b=[h,"p"])}}}for(var n="",o=[],f=0,g=d.length;g>f;++f){var b=d[f],p=b[0];switch(b[1]){case"ul":case"ol":!o.length||b[2]>o[0][1]?(o.unshift([b[1],b[2]]),n+="<"+o[0][0]+"><li>"+p):o.length>1&&b[2]<=o[1][1]?(n+="</li></"+o.shift()[0]+">",--f):n+="</li><li>"+p;continue}for(;o.length;)n+="</li></"+o.shift()[0]+">";switch(b[1]){case"p":n+="<p>"+p+"</p>";break;case"hr":n+="<hr/>";break;case"h":n+="<h"+b[2]+">"+p+"</h"+b[2]+">"}}for(;o.length;)n+="</li></"+o.shift()[0]+">";return n})};return d.href=function(a){return a},d});