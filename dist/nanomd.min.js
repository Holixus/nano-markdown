!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){"use strict";function a(a){return a.replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(a,b,c){return"~~"===b?"<del>"+c+"</del>":"<b>"+c+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(a,b,c,d,e){return b+"<i>"+d+"</i>"+e}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(a,c,d,e,f,g){var h=g?' title="'+g+'"':"";return c?'<img src="'+b.href(f)+'" alt="'+d+'"'+h+"/>":(e&&(h+=' target="_blank"'),'<a href="'+b.href(f)+'"'+h+">"+d+"</a>")})}var b=function(c){return c.replace(/.+(?:\n.+)*/g,function(c){for(var d,e=[],f=a(c).split("\n"),g=0,h=f.length;h>g;++g){var i=f[g],j=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(i);if(j)e.push(d=[j[2],"h",j[1].length]);else{var k=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(i);if(k)e.push(d=[k[3],k[2]?"ol":"ul",k[1].length]);else{var l=/^\s{0,3}([-])(\s*\1){2,}\s*$/.exec(i);l?e.push(d=["","hr"]):d&&"hr"!==d[1]&&"h"!==d[1]?d[0]+="\n"+i:e.push(d=[i,"p",""])}}}for(var m="",n=[],g=0,h=e.length;h>g;++g){var d=e[g],o=d[0],p=d[1],q=d[2];if("ul"===p||"ol"===p)!n.length||q>n[0][1]?(n.unshift([p,q]),m+="<"+n[0][0]+"><li>"+o):n.length>1&&q<=n[1][1]?(m+="</li></"+n.shift()[0]+">",--g):m+="</li><li>"+o;else{for(;n.length;)m+="</li></"+n.shift()[0]+">";m+="hr"===p?"<hr/>":"<"+p+q+b.headAttrs(q,o)+">"+o+"</"+p+q+">"}}for(;n.length;)m+="</li></"+n.shift()[0]+">";return m})};return b.href=function(a){return a},b.headAttrs=function(){return""},b});